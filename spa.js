!function(){"use strict";try{if(window.__legacy_low_end)return}catch(t){}function t(){try{if(document&&document.documentElement){try{document.documentElement.setAttribute("data-theme-mode","light")}catch(t){}try{document.documentElement.setAttribute("data-theme","opal")}catch(t){}}}catch(t){}}function e(e,n){var r=function(){try{var t=!0;try{"off"===localStorage.getItem("site-music")&&(t=!1)}catch(t){}try{!1===window.siteMusicEnabled&&(t=!1)}catch(t){}if(!t)return null;var e=document.getElementById("piyoverse-music");return e?{playing:!e.paused,time:e.currentTime||0}:null}catch(t){return null}}();try{var a=new XMLHttpRequest;a.open("GET",e,!0),a.onreadystatechange=function(){if(4===a.readyState)if(a.status>=200&&a.status<300){var i=function(t){var e=null;try{e=(new DOMParser).parseFromString(t,"text/html")}catch(t){e=null}if(!e)try{(e=document.implementation.createHTMLDocument("tmp")).documentElement.innerHTML=t}catch(t){e=null}return e}(a.responseText);if(!i)return void(window.location.href=e);if(!function(t){try{var e=t.getElementsByTagName("title")[0];e&&(document.title=e.textContent||e.innerText||document.title)}catch(t){}try{var n=t.getElementsByTagName("main")[0],r=document.getElementsByTagName("main")[0];if(!n||!r)return!1;r.innerHTML=n.innerHTML;var a=t.querySelector(".page-name-container"),i=document.querySelector(".page-name-container");return a&&i&&(i.innerHTML=a.innerHTML),!0}catch(t){return!1}}(i))return void(window.location.href=e);!function(t){var e={"market-audio.js":!0,"ie-fixes.js":!0,"anti-inspect.js":!0,"spa.js":!0,"pwa.js":!0,"legacy-lowend.js":!0,"ie-compat.js":!0,"bandcamp-popup.js":!0};try{var n=t.getElementsByTagName("main")[0];if(!n)return;for(var r=n.querySelectorAll?n.querySelectorAll("script"):[],a=0;a<r.length;a++){var i=r[a],c=null;try{c=i.getAttribute&&i.getAttribute("src")}catch(t){c=null}if(c){var o=(""+c).toLowerCase();for(var u in e)if(e.hasOwnProperty(u)&&-1!==o.indexOf(u)){c=null;break}if(c)try{var d=document.createElement("script");d.src=c,document.body.appendChild(d)}catch(t){}}else try{new Function(i.innerHTML)()}catch(t){}}}catch(t){}}(i);try{n&&window.history&&window.history.pushState&&window.history.pushState({spa:!0},"",e)}catch(t){}try{window.siteReinit&&window.siteReinit()}catch(t){}t();!function(t){if(t)try{var e=document.getElementById("piyoverse-music");if(!e)return;try{if("number"==typeof t.time&&Math.abs((e.currentTime||0)-t.time)>.5)try{e.currentTime=t.time}catch(t){}}catch(t){}if(t.playing)try{var n=e.play&&e.play();n&&n.then&&n.catch&&n.catch(function(){})}catch(t){}}catch(t){}}(r);try{window.scrollTo(0,0)}catch(t){}}else window.location.href=e},a.send(null)}catch(t){try{window.location.href=e}catch(t){}}}function n(t){var n=function(t){for(;t&&t!==document.documentElement;){try{if(t.tagName&&"a"===t.tagName.toLowerCase())return t}catch(t){}t=t.parentNode}return null}((t=t||window.event).target||t.srcElement);if(n&&function(t){try{if(!t||!t.getAttribute)return!1;var e=t.getAttribute("href");if(!e)return!1;if(0===(e=(""+e).trim()).indexOf("mailto:")||0===e.indexOf("tel:"))return!1;if(t.target&&t.target.toLowerCase&&"_blank"===t.target.toLowerCase())return!1;if(t.getAttribute("download")||t.hasAttribute("data-no-spa"))return!1;if(0===e.indexOf("#"))return!1;var n=null;try{window.URL&&(n=new URL(e,window.location.href).href)}catch(t){n=null}if(!n)try{var r=document.createElement("a");r.href=e,n=r.href}catch(t){n=null}if(!n)return!1;try{if(0!==n.indexOf(window.location.origin))return!1}catch(t){try{var a=document.createElement("a");if(a.href=n,a.host&&a.host!==window.location.host)return!1}catch(t){return!1}}return!0}catch(t){return!1}}(n)&&!(t.ctrlKey||t.metaKey||t.shiftKey||t.which&&2===t.which)){try{t.preventDefault?t.preventDefault():t.returnValue=!1}catch(t){}var r=n.getAttribute("href")||n.href;r&&e(r,!0)}}function r(){e(window.location.href,!1)}window.__spa_installed||(window.__spa_installed=!0,function(){try{var t=null;function e(t){try{if(!t||!t.tagName)return!1;var e=t.tagName.toLowerCase();if("button"===e)return!0;if("input"===e){var n=(t.type||"").toLowerCase();return"button"===n||"submit"===n}if("a"===e){var r=t.className||"";return-1!==r.indexOf("btn")||-1!==r.indexOf("nav-item")||-1!==r.indexOf("marketplace-btn")}return!1}catch(t){return!1}}function n(t){for(;t&&t!==document.documentElement;){if(e(t))return t;t=t.parentNode}return null}function r(e){e=e||window.event,t=n(e.target||e.srcElement)}function a(e){try{if(!t)return;var r=n(e&&(e.target||e.srcElement)||null);if(r&&r===t)try{r.blur&&r.blur()}catch(t){}}finally{t=null}}document.addEventListener?(document.addEventListener("pointerdown",r,!0),document.addEventListener("mousedown",r,!0),document.addEventListener("click",a,!0)):document.attachEvent&&(document.attachEvent("onmousedown",r),document.attachEvent("onclick",a))}catch(i){}}(),t(),document.addEventListener?document.addEventListener("click",n,!1):document.attachEvent&&document.attachEvent("onclick",n),window.addEventListener?window.addEventListener("popstate",r):window.attachEvent&&window.attachEvent("onpopstate",r))}();